<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Visualizing Patent Networks</title>

    <!-- External stylesheets -->
    <link href="css/external/bootstrap.min.css" rel="stylesheet">  <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="css/external/bootstrap-slider.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/external/tagify.css"/>
    <link rel="stylesheet" type="text/css" href="css/external/bootstrap-datepicker.min.css">
    <!-- Our stylesheets -->
    <link rel="stylesheet" type="text/css" href="css/style.css" >
    <link rel="stylesheet" type="text/css" href="css/dataStyle.css" >
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span><i class="glyphicon glyphicon-search inverse"></i></span>
      </button>
      <a class="navbar-brand" href="#">Visualizing Patent Networks</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">

      <!-- Keywords input-->
      <div class="input-group input-menu"> 
          <input name="keywords" class="searchInput" type="search" placeholder="Search Keywords" aria-label="Search Keywords">
          <span class="input-group-btn">
            <button class="btn btn-search keywordsRemoveAllBtn" type="button">Remove all keywords</button>
          </span>
      </div>

      <!-- Date picker for start & end-->
      <div class="input-group input-menu"> 
        <!-- start date -->
        <input type="text" class="form-control startDate" placeholder="Start Date (MM/DD/YYY)">
        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>

        <span class="input-group-addon dateSpacer"></span>

        <!-- end date -->
        <input type="text" class="form-control endDate" placeholder="End Date (MM/DD/YYY)">
        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
      </div>

      <!-- Assignee input-->
      <div class="input-group input-menu"> 
          <input name="assignee" class="searchInput" type="search" placeholder="Assignee Name" aria-label="Assignee">
          <span class="input-group-btn">
            <button class="btn btn-search assigneeRemoveAllBtn" type="button">Remove all assignees</button>
          </span>
      </div>

      <!-- Inventor input-->
      <div class="input-group input-menu"> 
          <input name="inventor" class="searchInput" type="search" placeholder="Inventor Name" aria-label="Inventor">
          <span class="input-group-btn">
            <button class="btn btn-search inventorRemoveAllBtn" type="button">Remove all inventors</button>
          </span>
      </div>

      <!-- Slider for keyword strength -->
      <div class="slider-strength">
        <p>
          Keyword Similarity Strength: <b>0</b>
          <input id="slider-strength">
          <b>10</b>
        </p>
      </div>

    </div>
  </div>
</nav> 
<!-- End navbar -->

<!-- Visualization region -->
<div class="row col-sm-12 col-xs-12" id="viz_area">
</div>
<!-- End visualization region -->

<!-- Bootstrap core JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="js/external/bootstrap.min.js"></script>
<script src="js/external/bootstrap-slider.min.js"></script>
<script src="js/external/bootstrap-datepicker.min.js"></script>
<!-- End Bootstrap core JavaScript -->

<!-- D3 -->
<script type="text/javascript" src="https://d3js.org/d3.v3.js"></script>

<!-- Tagify JS for keyword search -->
<script type="text/javascript" src="js/external/tagify.min.js"></script>

<!-- Google client -->
<!-- <script src="https://apis.google.com/js/client.js"></script> -->
<!-- TODO UNCOMMENT -->

<!-- Our JS --> 
<script type="text/javascript" src="js/dataHandler.js"></script> <!-- Query and filter data -->
<script type="text/javascript" src="js/plotData.js"></script> <!-- Plot data as nodes and links -->

<!-- Main -->
<script>

  $(document).ready( function () {
    $("[data-toggle='toggle']").click(function() {
      var selector = $(this).data("target");
      $(selector).toggleClass('in');
    });

    // run client library load and authentications
    $.getScript("https://apis.google.com/js/client.js", function(d) {
      // TODO UNCOMMENT 
      // onClientLoadHandler();
    });

    $(function(){
      $('.startDate').datepicker({
          calendarWeeks: true,
          todayHighlight: true,
          autoclose: true,
          clearBtn: true
      });
    });

    $(function(){
      $('.endDate').datepicker({
          calendarWeeks: true,
          todayHighlight: true,
          autoclose: true,
          clearBtn: false
      });
    });

    $('.startDate').datepicker().on('changeDate', function(e) {
      console.log(e.date);
    });

    $('.startDate').datepicker().on('clearDate', function(e) {
      console.log("no start date");
    });

    $('.endDate').datepicker().on('changeDate', function(e) {
      console.log(e.date);
    });

    $('.endDate').datepicker().on('clearDate', function(e) {
      console.log("no end date");
    });

  });

  plotNodes(0);

</script>

<!-- Keyword bar -->
<script> 
  var input = document.querySelector('input[name=keywords]');
  // init Tagify script on the "keyword input" box
  keywordTagify = new Tagify(input);

  // "remove all" button event listener
  document.querySelector('.keywordsRemoveAllBtn')
          .addEventListener('click', keywordTagify.removeAllTags.bind(keywordTagify))

  // event listeners
  keywordTagify.on('add', onAddKeyword)
               .on('remove', onRemoveKeyword)
               .on('input', onInputKeyword)
               .on('invalid', onInvalidKeyword)

  // keyword added callback
  function onAddKeyword(e){
    // console.log("added keyword: ", e.detail.value)
    addSearchKeyword(e.detail.value.toLowerCase());
    refreshQuery();
  }
  // keyword remvoed callback
  function onRemoveKeyword(e){
    // console.log("curr keywords:", keywordTagify.value);
    removeSearchKeyword(keywordTagify.value);
    refreshQuery();
  }
  // on character(s) added/removed (user is typing/deleting)
  function onInputKeyword(e){
  }
  // invalid tag added callback
  function onInvalidKeyword(e){
  }
//**  end keyword bar **//
</script> 

<!-- Assignee Bar -->
<script> 
  var input = document.querySelector('input[name=assignee]');
  // init Tagify script on the "keyword input" box
  assigneeTagify = new Tagify(input);

  // "remove all" button event listener
  document.querySelector('.assigneeRemoveAllBtn')
          .addEventListener('click', assigneeTagify.removeAllTags.bind(assigneeTagify))

  // event listeners
  assigneeTagify.on('add', onAddAssignee)
                .on('remove', onRemoveAssignee)
                .on('invalid', onInvalidAssignee)

  // keyword added callback
  function onAddAssignee(e){
    addAssigneeName(e.detail.value.toLowerCase());
    // console.log("added assignee: ", e.detail.value)
    refreshQuery();
  }
  // keyword remvoed callback
  function onRemoveAssignee(e){
    // console.log("current assignees:", assigneeTagify.value)
    removeAssigneeName(assigneeTagify.value);
    refreshQuery();
  }
  // invalid tag added callback
  function onInvalidAssignee(e){
    // console.log(e, e.detail);
  }
//**  end assignee bar **//
</script> 

<!-- Inventor Bar -->
<script> 
  var input = document.querySelector('input[name=inventor]');
  // init Tagify script on the "keyword input" box
  inventorTagify = new Tagify(input);

  // "remove all" button event listener
  document.querySelector('.inventorRemoveAllBtn')
          .addEventListener('click', inventorTagify.removeAllTags.bind(inventorTagify))

  // event listeners
  inventorTagify.on('add', onAddInventor)
                .on('remove', onRemoveInventor)
                .on('invalid', onInvalidInventor)

  // keyword added callback
  function onAddInventor(e){
    addInventorName(e.detail.value.toLowerCase());
    // console.log("added inventor:",e.detail.value)
    refreshQuery();
  }
  // keyword remvoed callback
  function onRemoveInventor(e){
    // console.log("curr inventors:", inventorTagify.value)
    removeInventorName(inventorTagify.value);
    refreshQuery();
  }
  // invalid tag added callback
  function onInvalidInventor(e){
  }
//**  end inventor bar **//
</script> 

<!-- Keyword Slider -->
<script>
  var sliderValue=0;
  var slider = new Slider("#slider-strength", {
            min: 0,
            max: 10,
            step: 1,
            value: 5
  });
  slider.on("change", function(e) {
    sliderValue = e.newValue;
    console.log(sliderValue);
    // document.getElementById("ex6SliderVal").textContent = sliderValue;
  });
</script>

</body>


</html>
